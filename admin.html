<!doctype html>
<html lang="pt-BR">
<head>
<meta charset="utf-8">
<title>ADM – Controle de Vendedores</title>
<style>
body{font-family:Arial;margin:0;background:#f2f2f2;padding:20px}
.box{max-width:600px;margin:20px auto;background:#fff;padding:20px;border-radius:10px;box-shadow:0 4px 15px rgba(0,0,0,0.1)}
input{width:100%;padding:10px;margin:8px 0;border:1px solid #ccc;border-radius:6px}
button{padding:12px 18px;background:#25D366;color:#fff;border:0;border-radius:8px;font-weight:700;cursor:pointer;margin-top:5px}
.listBox{margin-top:20px;padding:15px;background:#fafafa;border-radius:8px;border:1px solid #ddd}
.item{padding:10px;border-bottom:1px solid #eee;display:flex;flex-direction:column;margin-bottom:10px}
.btns{margin-top:8px;display:flex;gap:10px}
.del{background:#d9534f;color:#fff;border:0;border-radius:6px;padding:6px 10px;cursor:pointer}
.off{background:#f0ad4e;color:#fff;border:0;border-radius:6px;padding:6px 10px;cursor:pointer}
#painel{display:none}
</style>
</head>
<body>

<div class="box" id="loginBox">
  <h2>Login do Administrador</h2>
  <label>Usuário</label>
  <input id="userLogin">

  <label>Senha</label>
  <input id="passLogin" type="password">

  <button onclick="loginAdm()">Entrar</button>
  <div id="loginMsg" style="margin-top:10px;color:red"></div>
</div>

<div class="box" id="painel">
  <h2>Cadastro de Vendedor</h2>

  <label>Nome</label>
  <input id="nomeVend">

  <label>CPF</label>
  <input id="cpfVend">

  <label>WhatsApp (somente números)</label>
  <input id="zapVend">

  <label>URL da Foto de Perfil</label>
  <input id="fotoVend">

  <button onclick="salvarVendedor()">Salvar Vendedor</button>

  <div id="msg"></div>

  <h3>Vendedores Cadastrados</h3>
  <div class="listBox" id="listaVend"></div>
</div>

<script>
// LOGIN FIXO
function loginAdm(){
  const u = document.getElementById("userLogin").value;
  const p = document.getElementById("passLogin").value;

  if(u === "lucasdbr15" && p === "100%Deus"){
    document.getElementById('loginBox').style.display = 'none';
    document.getElementById('painel').style.display = 'block';
  } else {
    document.getElementById('loginMsg').innerText = "Usuário ou senha incorretos";
  }
}

// CARREGAR BANCO
let VENDEDORES = JSON.parse(localStorage.getItem("DB_HONDA") || "{}");

// SALVAR
function salvarVendedor(){
  const nome = nomeVend.value.trim();
  const cpf = cpfVend.value.trim();
  const zap = zapVend.value.trim();
  const foto = fotoVend.value.trim();

  if(!nome || !cpf || !zap){ alert("Preencha todos os campos obrigatórios"); return; }

  const linkVendedor = location.origin + location.pathname.replace(/[^/]*$/, '') + "index.html?vendedor=" + cpf;

  VENDEDORES[cpf] = {
    nome,
    cpf,
    zap,
    foto,
    ativo: true,
    link: linkVendedor
  };

  localStorage.setItem("DB_HONDA", JSON.stringify(VENDEDORES));
  atualizarLista();

  msg.innerHTML = `<strong>Vendedor salvo!</strong><br>Link:<br><input style='width:100%;padding:8px' value='${linkVendedor}' readonly>`;
}

// LISTA
function atualizarLista(){
  listaVend.innerHTML = "";

  for(const cpf in VENDEDORES){
    const v = VENDEDORES[cpf];

    const div = document.createElement('div');
    div.className = 'item';

    div.innerHTML = `
      <strong>${v.nome}</strong><br>
      CPF: ${v.cpf}<br>
      WhatsApp: ${v.zap}<br>
      Foto: ${v.foto}<br>
      Status: <b style='color:${v.ativo ? "green" : "red"}'>${v.ativo ? "ATIVO" : "DESATIVADO"}</b><br>
      Link: <input value='${v.link}' style='width:100%;padding:6px' readonly>
      <div class="btns">
        <button class="del" onclick="excluirVend('${cpf}')">Excluir</button>
        <button class="off" onclick="toggleStatus('${cpf}')">${v.ativo?"Desativar":"Reativar"}</button>
      </div>
    `;

    listaVend.appendChild(div);
  }
}

// EXCLUIR
function excluirVend(cpf){
  delete VENDEDORES[cpf];
  localStorage.setItem("DB_HONDA", JSON.stringify(VENDEDORES));
  atualizarLista();
}

// ATIVAR/DESATIVAR
function toggleStatus(cpf){
  VENDEDORES[cpf].ativo = !VENDEDORES[cpf].ativo;
  localStorage.setItem("DB_HONDA", JSON.stringify(VENDEDORES));
  atualizarLista();
}

atualizarLista();
</script>

</body>
</html>
